---
import MainLayout from "@/layouts/MainLayout.astro";
import {
    portfolioThemesEN,
    portfolioThemesTW,
} from "@/data/themes/portfolioData";
import {
    ecommerceThemesEN,
    ecommerceThemesTW,
} from "@/data/themes/ecommerceData";
import {
    corporateThemesEN,
    corporateThemesTW,
} from "@/data/themes/corporateData";
import {
    contentNewsThemesEN,
    contentNewsThemesTW,
} from "@/data/themes/contentNewsData";
import { softwareThemesEN, softwareThemesTW } from "@/data/themes/softwareData";

const { lang, category } = Astro.params;

// Helper to get themes based on lang and category
function getThemes(cat: string | undefined, l: string | undefined) {
    if (cat === "portfolio") {
        return l === "zh-tw" ? portfolioThemesTW : portfolioThemesEN;
    }
    if (cat === "ecommerce") {
        return l === "zh-tw" ? ecommerceThemesTW : ecommerceThemesEN;
    }
    if (cat === "corporate") {
        return l === "zh-tw" ? corporateThemesTW : corporateThemesEN;
    }
    if (cat === "content-news") {
        return l === "zh-tw" ? contentNewsThemesTW : contentNewsThemesEN;
    }
    if (cat === "software") {
        return l === "zh-tw" ? softwareThemesTW : softwareThemesEN;
    }
    return [];
}

const themes = getThemes(category, lang);
const defaultThemeId = themes[0]?.id || "VisualDesigner"; // Fallback safe

// Redirect to the first theme
if (lang && category) {
    return Astro.redirect(`/${lang}/explore/${category}/${defaultThemeId}`);
}

return Astro.redirect("/404");
---

<!-- 
    This page is now a redirector. 
    It ensures that visiting /[lang]/explore/[category] automatically 
    takes the user to the first theme in that category.
-->
