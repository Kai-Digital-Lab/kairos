---
import type { ISubThemeDetail } from "@/types/Theme";
import Button from "@/components/design-system/atoms/Button.astro";
import Badge from "@/components/design-system/atoms/Badge.astro";
import Card from "@/components/design-system/atoms/Card.astro";

interface Props {
    theme: ISubThemeDetail;
}

const { theme } = Astro.props;
const { contentFocus } = theme;
const lang = Astro.currentLocale || "en";

const t = {
    en: {
        tag: "Monthly Goodness",
        desc: "Curated boxes delivered to your doorstep. Choose the plan that fits your lifestyle.",
        plans: [
            {
                name: "Starter Box",
                price: "$29",
                features: [
                    "✓ 3 Premium Items",
                    "✓ Free Shipping",
                    "✗ Customization",
                ],
                btn: "Select Starter",
            },
            {
                name: "Curator's Choice",
                price: "$59",
                features: [
                    "✓ 7 Premium Items",
                    "✓ Priority Shipping",
                    "✓ Full Customization",
                ],
                btn: null,
                tag: "BEST VALUE",
            },
            {
                name: "Luxe Collection",
                price: "$99",
                features: [
                    "✓ 12+ Luxury Items",
                    "✓ Mystery Gifts",
                    "✓ VIP Support",
                ],
                btn: "Select Luxe",
            },
        ],
        perMo: "/mo",
    },
    "zh-tw": {
        tag: "每月精選",
        desc: "精選禮盒直送到府。選擇適合您生活方式的方案。",
        plans: [
            {
                name: "入門禮盒",
                price: "$29",
                features: ["✓ 3 樣精選商品", "✓ 免運費", "✗ 客製化"],
                btn: "選擇入門",
            },
            {
                name: "策展人精選",
                price: "$59",
                features: ["✓ 7 樣精選商品", "✓ 優先配送", "✓ 完全客製化"],
                btn: null,
                tag: "超值首選",
            },
            {
                name: "奢華系列",
                price: "$99",
                features: ["✓ 12+ 樣奢華商品", "✓ 神秘禮物", "✓ VIP 支援"],
                btn: "選擇奢華",
            },
        ],
        perMo: "/月",
    },
}[lang] || {
    tag: "",
    desc: "",
    plans: [
        { name: "", price: "", features: [], btn: "" },
        { name: "", price: "", features: [], btn: "", tag: "" },
        { name: "", price: "", features: [], btn: "" },
    ],
    perMo: "",
};
---

<div
    class="bg-yellow-50 dark:bg-yellow-950/30 py-12 px-6 transition-colors duration-300 min-h-[600px] flex flex-col justify-center"
>
    <div class="text-center mb-12">
        <span
            class="text-yellow-600 dark:text-yellow-500 font-bold tracking-wider uppercase text-sm"
            >{t.tag}</span
        >
        <h2 class="text-4xl font-bold text-gray-900 dark:text-white mt-2 mb-4">
            {contentFocus.title}
        </h2>
        <p class="text-gray-600 dark:text-gray-300 max-w-xl mx-auto">
            {t.desc}
        </p>
    </div>

    {
        contentFocus.showPlanComparison && (
            <div class="max-w-5xl mx-auto grid md:grid-cols-3 gap-8 items-center">
                {/* Basic Plan */}
                <Card
                    variant="bordered"
                    class="opacity-80 hover:opacity-100 transition-opacity p-6"
                >
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100">
                        {t.plans[0].name}
                    </h3>
                    <div class="text-3xl font-bold my-4 text-gray-900 dark:text-white">
                        {t.plans[0].price}
                        <span class="text-sm font-normal text-gray-500 dark:text-gray-400">
                            {t.perMo}
                        </span>
                    </div>
                    <ul class="space-y-3 mb-6 text-sm text-gray-600 dark:text-gray-300">
                        {t.plans[0].features.map((f: string) => (
                            <li class="flex items-center text-gray-600 dark:text-gray-300">
                                {f}
                            </li>
                        ))}
                    </ul>
                    <Button
                        variant="outline"
                        class="w-full !border-gray-300 dark:!border-gray-600 text-gray-700 dark:text-gray-200 py-2 hover:!bg-gray-50 dark:hover:!bg-slate-700"
                    >
                        {t.plans[0].btn}
                    </Button>
                </Card>

                {/* Pro Plan */}
                <Card
                    variant="default"
                    class="!shadow-xl p-8 border-2 !border-yellow-400 relative transform scale-105 z-10 bg-white dark:bg-slate-800"
                >
                    <div class="absolute top-0 right-0">
                        <Badge
                            variant="neutral"
                            class="!bg-yellow-400 !text-white !rounded-none !rounded-bl-lg !rounded-tr-lg font-bold px-3 py-1"
                        >
                            {t.plans[1].tag}
                        </Badge>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
                        {t.plans[1].name}
                    </h3>
                    <div class="text-4xl font-bold my-4 text-gray-900 dark:text-white">
                        {t.plans[1].price}
                        <span class="text-sm font-normal text-gray-500 dark:text-gray-400">
                            {t.perMo}
                        </span>
                    </div>
                    <ul class="space-y-3 mb-8 text-gray-700 dark:text-gray-300">
                        {t.plans[1].features.map((f: string) => (
                            <li class="flex items-center">
                                <span class="text-green-500 mr-2">✓</span>{" "}
                                {f.replace("✓", "")}
                            </li>
                        ))}
                    </ul>
                    <Button
                        variant="primary"
                        class="w-full !bg-yellow-500 hover:!bg-yellow-600 text-white font-bold py-3 !shadow-lg"
                    >
                        {contentFocus.primaryCTA}
                    </Button>
                </Card>

                {/* Ultimate Plan */}
                <Card
                    variant="bordered"
                    class="opacity-80 hover:opacity-100 transition-opacity p-6"
                >
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100">
                        {t.plans[2].name}
                    </h3>
                    <div class="text-3xl font-bold my-4 text-gray-900 dark:text-white">
                        {t.plans[2].price}
                        <span class="text-sm font-normal text-gray-500 dark:text-gray-400">
                            {t.perMo}
                        </span>
                    </div>
                    <ul class="space-y-3 mb-6 text-sm text-gray-600 dark:text-gray-300">
                        {t.plans[2].features.map((f: string) => (
                            <li class="flex items-center text-gray-600 dark:text-gray-300">
                                {f}
                            </li>
                        ))}
                    </ul>
                    <Button
                        variant="outline"
                        class="w-full !border-gray-300 dark:!border-gray-600 text-gray-700 dark:text-gray-200 py-2 hover:!bg-gray-50 dark:hover:!bg-slate-700"
                    >
                        {t.plans[2].btn}
                    </Button>
                </Card>
            </div>
        )
    }
</div>
